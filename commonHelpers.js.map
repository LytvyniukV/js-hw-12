{"version":3,"file":"commonHelpers.js","sources":["../src/js/gallery-init.js","../src/js/refs.js","../src/js/show-message.js","../src/js/manage-class.js","../src/js/request.js","../src/js/markup.js","../src/js/scroll.js","../src/js/create-search.js","../src/main.js"],"sourcesContent":["\nimport SimpleLightbox from \"simplelightbox\";\nimport \"simplelightbox/dist/simple-lightbox.min.css\";\n\nexport const modalGallery = new SimpleLightbox('.gallery a', {className: 'simple-lightbox'});","export const refs = {\n  searchForm: document.querySelector('.search-form'),\n  gallery: document.querySelector('.gallery'),\n  paginationBtn: document.getElementById('pagination-btn')\n};\n\n\n","import iziToast from 'izitoast';\nimport 'izitoast/dist/css/iziToast.min.css';\n\nconst showMessageError = () => {\n  iziToast.error({\n    message: `Sorry, there are no images matching your search query. Please try again!`,\n    backgroundColor: 'rgb(240, 115, 115)',\n    messageColor: 'white',\n    maxWidth: 300,\n    position: 'topRight',\n    timeout: 3000,\n    progressBar: false,\n    transitionIn: 'bounceInRight',\n    transitionOut: 'fadeOutLeft',\n    messageSize: 14,\n  });\n};\n\nconst showMessageEndImages = () => {\n  iziToast.info({\n    message: `We're sorry, but you've reached the end of search results.`,\n    backgroundColor: '#afbef3',\n    messageColor: 'white',\n    maxWidth: 300,\n    position: 'topRight',\n    timeout: 3000,\n    progressBar: false,\n    transitionIn: 'bounceInRight',\n    transitionOut: 'fadeOutLeft',\n    messageSize: 14,\n  });\n};\n\nconst showMessageForEmptyInput = () => {\n  iziToast.info({\n    message: `Please, enter some words to find picture`,\n    backgroundColor: '#afbef3',\n    messageColor: 'white',\n    maxWidth: 300,\n    position: 'topRight',\n    timeout: 3000,\n    progressBar: false,\n    transitionIn: 'bounceInRight',\n    transitionOut: 'fadeOutLeft',\n    messageSize: 14,\n  });\n};\n\nconst showMessageFetchError = () => {\n  iziToast.error({\n    message: `Sorry, we have some problem. Try again later, please`,\n    backgroundColor: 'rgb(240, 115, 115)',\n    messageColor: 'white',\n    maxWidth: 300,\n    position: 'center',\n    timeout: 3000,\n    progressBar: false,\n    transitionIn: 'bounceInRight',\n    transitionOut: 'fadeOutLeft',\n    messageSize: 14,\n  });\n};\n\nexport {\n  showMessageEndImages,\n  showMessageError,\n  showMessageFetchError,\n  showMessageForEmptyInput,\n};\n","const addClass = (elem, className = 'hidden') => {\n  elem.classList.add(className);\n};\n\nconst removeClass = (elem, className = 'hidden') => {\n  elem.classList.remove(className);\n};\n\nexport { addClass, removeClass };\n","import axios from 'axios';\nimport {\n  showMessageError,\n  showMessageEndImages,\n  showMessageFetchError,\n} from './show-message';\nimport { refs } from './refs';\nimport { addClass, removeClass } from './manage-class';\n\nconst api = axios.create({\n  params: {\n    key: '41495640-29bfe7f4b7a68b8700cb52105',\n    image_type: 'photo',\n    orientation: 'horizontal',\n    safesearch: true,\n  },\n});\nconst getResponse = async params => {\n  const response = await api.get('https://pixabay.com/api/', { params });\n  return response.data;\n};\n\nexport const createGetImagesRequest = async ({ page, q }) => {\n  const per_page = 40;\n\n  try {\n    const { hits, totalHits } = await getResponse({\n      page,\n      per_page,\n      q,\n    });\n    if (hits.length < 1) {\n      showMessageError();\n      return;\n    }\n\n    if (per_page < totalHits) {\n      removeClass(refs.paginationBtn);\n    }\n    if (page === Math.ceil(totalHits / per_page)) {\n      addClass(refs.paginationBtn);\n      showMessageEndImages();\n    }\n\n    return hits;\n  } catch (error) {\n    showMessageFetchError();\n  }\n};\n","import { refs } from './refs';\n\nexport const renderImages = (images = []) => {\n  if(images.length < 1) return;\n  const markupCards = images.reduce(\n    (\n      html,\n      { largeImageURL, webformatURL, tags, likes, views, comments, downloads }\n    ) =>\n      html +\n      `\n        <li class='gallery-item'>\n            <a href=\"${largeImageURL}\">\n            <img src=\"${webformatURL}\" alt=\"${tags}\" width='640' height='640'/>\n            </a>\n            <div class='info-wrap'>\n              <div>\n                <h3 class='card-title'>Likes</h3>\n                <p class='info-amount'>${likes}</p>\n              </div>\n              <div>\n                <h3 class='card-title'>Views</h3>\n                <p class='info-amount'>${views}</p>\n              </div>\n              <div>\n                <h3 class='card-title'>Comments</h3>\n                <p class='info-amount'>${comments}</p>\n              </div>\n              <div>\n                <h3 class='card-title'>Downloads</h3>\n                <p class='info-amount'>${downloads}</p>\n              </div>\n            </div>\n          </li>`,\n    ''\n  );\n\n  refs.gallery.insertAdjacentHTML('beforeend', markupCards);\n};\n","export const createAutoScroll = () => {\n    const galleryItem = document.querySelector('.gallery-item');\n    const galleryItemParams = galleryItem.getBoundingClientRect();\n    window.scrollBy({\n      top: galleryItemParams.height * 2,\n      behavior: 'smooth',\n    });\n}","import { modalGallery } from './gallery-init';\nimport { refs } from './refs';\nimport { createGetImagesRequest } from './request';\nimport { renderImages } from './markup';\nimport { addClass, removeClass } from './manage-class';\nimport { createAutoScroll } from './scroll';\nimport { showMessageForEmptyInput } from './show-message';\nlet loadMoreImages = null;\nexport let page;\nexport const onSearch = async event => {\n  event.preventDefault();\n  refs.paginationBtn.classList.add('hidden');\n  page = 1;\n  if (loadMoreImages !== null) {\n    refs.paginationBtn.removeEventListener('click', loadMoreImages);\n    loadMoreImages = null;\n  }\n  const spinner = document.querySelector('.loader');\n  const searchQuery = new FormData(event.currentTarget).get('query');\n  if (searchQuery.trim() === '') {\n    showMessageForEmptyInput();\n    return;\n  }\n  refs.gallery.innerHTML = '';\n\n  loadMoreImages = async () => {\n    const images = await showSpinner({\n      promise: createGetImagesRequest({\n        page: page,\n        q: searchQuery,\n      }),\n      spinner: spinner,\n    });\n    renderImages(images);\n    modalGallery.refresh();\n    if(page > 1) createAutoScroll();\n    page++;\n  };\n\n  loadMoreImages();\n\n  refs.searchForm.reset();\n  refs.paginationBtn.addEventListener('click', loadMoreImages);\n\n  async function showSpinner({ promise, spinner }) {\n    removeClass(spinner);\n\n    const response = await promise;\n\n    addClass(spinner);\n\n    return response;\n  }\n};\n","import { onSearch } from './js/create-search';\nimport { refs } from './js/refs';\n\nrefs.searchForm.addEventListener('submit', onSearch);\n"],"names":["modalGallery","SimpleLightbox","refs","showMessageError","iziToast","showMessageEndImages","showMessageForEmptyInput","showMessageFetchError","addClass","elem","className","removeClass","api","axios","getResponse","params","createGetImagesRequest","page","q","hits","totalHits","renderImages","images","markupCards","html","largeImageURL","webformatURL","tags","likes","views","comments","downloads","createAutoScroll","galleryItemParams","loadMoreImages","onSearch","event","spinner","searchQuery","showSpinner","promise","response"],"mappings":"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"}